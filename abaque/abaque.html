<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estimation des Coûts</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <canvas id="costChart" width="800" height="400"></canvas>
    <script>
        const vmOVHd2_2 = 6 * 0.0099 * 24 * 31;
        const IPfloat = 0.0025 * 24 * 31;
        const GatewayM = 0.0111 * 24 * 31;

        const BPOVH100 = 0.0083 * 31 * 24 / 4;
        const StorageOVH = 0.000059 * 24 * 31 * 50;
        const BlockStorage = 0.000015 * 24 * 31 * 50;

        const coutinit = GatewayM + IPfloat + vmOVHd2_2;
        const coutclient = BPOVH100 + StorageOVH + BlockStorage;
        const abo = 4.99;

        const seuil = coutinit / (abo - coutclient);
        console.log("seuil de rentabilité : " + seuil + "client")


        const clients = [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100, 110, 120, 130, 140, 150, 160, 170, 180, 190, 200];
        const coutOVH = [coutinit, coutinit + coutclient * 10, coutinit + coutclient * 20, coutinit + coutclient * 30, coutinit + coutclient * 40, coutinit + coutclient * 50, coutinit + coutclient * 60, coutinit + coutclient * 70, coutinit + coutclient * 80, coutinit + coutclient * 90, coutinit + coutclient * 100, coutinit + coutclient * 110, coutinit + coutclient * 120, coutinit + coutclient * 130, coutinit + coutclient * 140, coutinit + coutclient * 150, coutinit + coutclient * 160, coutinit + coutclient * 170, coutinit + coutclient * 180, coutinit + coutclient * 190, coutinit + coutclient * 200]
        const argentGagne = [0, abo * 10, abo * 20, abo * 30, abo * 40, abo * 50, abo * 60, abo * 70, abo * 80, abo * 90, abo * 100, abo * 110, abo * 120, abo * 130, abo * 140, abo * 150, abo * 160, abo * 170, abo * 180, abo * 190, abo * 200];

        const ctx = document.getElementById('costChart').getContext('2d');
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: clients,
                datasets: [
                    {
                        label: 'Coût Estimé OVH(Rouge) (€)',
                        data: coutOVH,
                        borderColor: 'red',
                        backgroundColor: 'rgba(255, 0, 0, 0.2)',
                        fill: true,
                        tension: 0.3,
                    },
                    {
                        label: "Chiffre d'affaire (bleu) (€)",
                        data: argentGagne,
                        borderColor: 'blue',
                        backgroundColor: 'rgba(0, 0, 255, 0.2)',
                        fill: true,
                        tension: 0.3,
                    }
                ]
            },
            options: {
                responsive: true,
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Nombre de Clients'
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Coût et Revenus (€)'
                        }
                    }
                }
            }
        });
    </script>
</body>

</html>